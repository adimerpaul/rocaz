import{e as ye,v as Se,r as b,y as Ve,f as v,aL as ze,w as Ce,aM as Pe,aN as we,b as xe,h as g,q as qe,C as I,g as Qe,bo as T,bp as X,_ as ke,F as Y,G as P,H as W,I as c,K as i,J as s,O as D,ar as w,bb as Be,aq as C,Q as _,b5 as Z,at as M,L as p,M as A,as as R,bd as Ae,bc as Oe,av as Ie,au as $}from"./index.7482b5b4.js";import{Q as x}from"./QSelect.eacf1598.js";import{Q as Te,a as U}from"./QTable.4e8f66ad.js";import{Q as De}from"./QTr.74eca21b.js";import{Q as ee}from"./QResizeObserver.2c6c39c4.js";import{Q as Me}from"./QScrollObserver.de637038.js";import{T as te}from"./TouchPan.3aae128e.js";import{b as O}from"./format.f3268499.js";import{a as E,Q as Re}from"./QItem.bedcfef6.js";import{Q as Ue}from"./QTooltip.180f314e.js";import{C as Ee,Q as He}from"./CalculatePage.8b2b04b5.js";import{Q as Ne}from"./QList.a2518e61.js";import{Q as Fe}from"./QSpace.52adb139.js";import{Q as Ge}from"./QMarkupTable.36133784.js";import{Q as Le}from"./QForm.9c3fb8f1.js";import{Q as je}from"./QPage.9494b277.js";import{C as oe}from"./ClosePopup.ae0e9537.js";import{P as Je}from"./ProductsComponents.22cbdb54.js";import{I as Ke}from"./Imprimir.d5b616a5.js";import"./Alert.84036a2a.js";import"./QImg.1b2ccac8.js";import"./moment.40bc58bf.js";const le=["vertical","horizontal"],H={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},ae={prevent:!0,mouse:!0,mouseAllDir:!0},ie=e=>e>=250?50:Math.ceil(e/5);var Xe=ye({name:"QScrollArea",props:{...Se,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:l,emit:m}){const y=b(!1),r=b(!1),d=b(!1),h={vertical:b(0),horizontal:b(0)},t={vertical:{ref:b(null),position:b(0),size:b(0)},horizontal:{ref:b(null),position:b(0),size:b(0)}},{proxy:o}=Qe(),f=Ve(e,o.$q);let q=null,N;const S=b(null),se=v(()=>"q-scrollarea"+(f.value===!0?" q-scrollarea--dark":""));t.vertical.percentage=v(()=>{const a=t.vertical.size.value-h.vertical.value;if(a<=0)return 0;const n=O(t.vertical.position.value/a,0,1);return Math.round(n*1e4)/1e4}),t.vertical.thumbHidden=v(()=>(e.visible===null?d.value:e.visible)!==!0&&y.value===!1&&r.value===!1||t.vertical.size.value<=h.vertical.value+1),t.vertical.thumbStart=v(()=>t.vertical.percentage.value*(h.vertical.value-t.vertical.thumbSize.value)),t.vertical.thumbSize=v(()=>Math.round(O(h.vertical.value*h.vertical.value/t.vertical.size.value,ie(h.vertical.value),h.vertical.value))),t.vertical.style=v(()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${t.vertical.thumbStart.value}px`,height:`${t.vertical.thumbSize.value}px`})),t.vertical.thumbClass=v(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(t.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),t.vertical.barClass=v(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(t.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),t.horizontal.percentage=v(()=>{const a=t.horizontal.size.value-h.horizontal.value;if(a<=0)return 0;const n=O(Math.abs(t.horizontal.position.value)/a,0,1);return Math.round(n*1e4)/1e4}),t.horizontal.thumbHidden=v(()=>(e.visible===null?d.value:e.visible)!==!0&&y.value===!1&&r.value===!1||t.horizontal.size.value<=h.horizontal.value+1),t.horizontal.thumbStart=v(()=>t.horizontal.percentage.value*(h.horizontal.value-t.horizontal.thumbSize.value)),t.horizontal.thumbSize=v(()=>Math.round(O(h.horizontal.value*h.horizontal.value/t.horizontal.size.value,ie(h.horizontal.value),h.horizontal.value))),t.horizontal.style=v(()=>({...e.thumbStyle,...e.horizontalThumbStyle,[o.$q.lang.rtl===!0?"right":"left"]:`${t.horizontal.thumbStart.value}px`,width:`${t.horizontal.thumbSize.value}px`})),t.horizontal.thumbClass=v(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(t.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),t.horizontal.barClass=v(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(t.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const re=v(()=>t.vertical.thumbHidden.value===!0&&t.horizontal.thumbHidden.value===!0?e.contentStyle:e.contentActiveStyle),ne=[[te,a=>{j(a,"vertical")},void 0,{vertical:!0,...ae}]],ce=[[te,a=>{j(a,"horizontal")},void 0,{horizontal:!0,...ae}]];function F(){const a={};return le.forEach(n=>{const u=t[n];a[n+"Position"]=u.position.value,a[n+"Percentage"]=u.percentage.value,a[n+"Size"]=u.size.value,a[n+"ContainerSize"]=h[n].value}),a}const G=ze(()=>{const a=F();a.ref=o,m("scroll",a)},0);function L(a,n,u){if(le.includes(a)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(a==="vertical"?X:T)(S.value,n,u)}function de({height:a,width:n}){let u=!1;h.vertical.value!==a&&(h.vertical.value=a,u=!0),h.horizontal.value!==n&&(h.horizontal.value=n,u=!0),u===!0&&Q()}function ue({position:a}){let n=!1;t.vertical.position.value!==a.top&&(t.vertical.position.value=a.top,n=!0),t.horizontal.position.value!==a.left&&(t.horizontal.position.value=a.left,n=!0),n===!0&&Q()}function he({height:a,width:n}){t.horizontal.size.value!==n&&(t.horizontal.size.value=n,Q()),t.vertical.size.value!==a&&(t.vertical.size.value=a,Q())}function j(a,n){const u=t[n];if(a.isFirst===!0){if(u.thumbHidden.value===!0)return;N=u.position.value,r.value=!0}else if(r.value!==!0)return;a.isFinal===!0&&(r.value=!1);const z=H[n],B=h[n].value,be=(u.size.value-B)/(B-u.thumbSize.value),ge=a.distance[z.dist],_e=N+(a.direction===z.dir?1:-1)*ge*be;K(_e,n)}function J(a,n){const u=t[n];if(u.thumbHidden.value!==!0){const z=a[H[n].offset];if(z<u.thumbStart.value||z>u.thumbStart.value+u.thumbSize.value){const B=z-u.thumbSize.value/2;K(B/h[n].value*u.size.value,n)}u.ref.value!==null&&u.ref.value.dispatchEvent(new MouseEvent(a.type,a))}}function me(a){J(a,"vertical")}function ve(a){J(a,"horizontal")}function Q(){y.value=!0,q!==null&&clearTimeout(q),q=setTimeout(()=>{q=null,y.value=!1},e.delay),e.onScroll!==void 0&&G()}function K(a,n){S.value[H[n].scroll]=a}let V=null;function pe(){V!==null&&clearTimeout(V),V=setTimeout(()=>{V=null,d.value=!0},o.$q.platform.is.ios?50:0)}function fe(){V!==null&&(clearTimeout(V),V=null),d.value=!1}let k=null;return Ce(()=>o.$q.lang.rtl,a=>{S.value!==null&&T(S.value,Math.abs(t.horizontal.position.value)*(a===!0?-1:1))}),Pe(()=>{k={top:t.vertical.position.value,left:t.horizontal.position.value}}),we(()=>{if(k===null)return;const a=S.value;a!==null&&(T(a,k.left),X(a,k.top))}),xe(G.cancel),Object.assign(o,{getScrollTarget:()=>S.value,getScroll:F,getScrollPosition:()=>({top:t.vertical.position.value,left:t.horizontal.position.value}),getScrollPercentage:()=>({top:t.vertical.percentage.value,left:t.horizontal.percentage.value}),setScrollPosition:L,setScrollPercentage(a,n,u){L(a,n*(t[a].size.value-h[a].value)*(a==="horizontal"&&o.$q.lang.rtl===!0?-1:1),u)}}),()=>g("div",{class:se.value,onMouseenter:pe,onMouseleave:fe},[g("div",{ref:S,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:e.tabindex!==void 0?e.tabindex:void 0},[g("div",{class:"q-scrollarea__content absolute",style:re.value},qe(l.default,[g(ee,{debounce:0,onResize:he})])),g(Me,{axis:"both",onScroll:ue})]),g(ee,{debounce:0,onResize:de}),g("div",{class:t.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:me}),g("div",{class:t.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:ve}),I(g("div",{ref:t.vertical.ref,class:t.vertical.thumbClass.value,style:t.vertical.style.value,"aria-hidden":"true"}),ne),I(g("div",{ref:t.horizontal.ref,class:t.horizontal.thumbClass.value,style:t.horizontal.style.value,"aria-hidden":"true"}),ce)])}});const Ye={name:"ProductosPage",components:{CalculatePage:Ee,ProductsComponents:Je},data(){return{descuento:"",vista:"tabla",calculateDialog:!1,metodoPago:"EFECTIVO",precio:"PRECIO 1",almacenSelected:"Todo",search:"",categories:[{id:"",name:"Selecciona una categor\xEDa"}],loading:!1,categoriSelected:"",ordenes:["Selecciona un orden","Alfab\xE9tico","Producto m\xE1s vendido","Producto menos vendido","Ultimas unidades disponibles"],ordenSelected:"Selecciona un orden",medidas:[],products:[],productsAll:[],saleDialog:!1,client:{nit:"",nombre:""},efectivo:"",proveedores:[],proveedoresAll:[],proveedor_id:"",observacion:""}},mounted(){this.proveedoresGet(),this.categoriesGet(),this.productsGet(),this.medidasGet()},methods:{fnFilter(e,l){if(e==="")l(()=>{this.proveedores=this.proveedoresAll});else{const m=e.toLowerCase();l(()=>{this.proveedores=this.proveedoresAll.filter(y=>y.nombre.toLowerCase().indexOf(m)>-1)})}},proveedoresGet(){this.$axios.get("proveedores").then(e=>{this.proveedores=this.proveedores.concat(e.data),this.proveedoresAll=e.data})},numero2digitosRedondeado(e){return(Math.round(e*100)/100).toFixed(2)},saleInsert(){if(this.$store.productosBuys.length===0){this.$q.notify({color:"red",position:"top",message:"No hay productos en la canasta",icon:"report_problem"});return}if(this.proveedor_id===""){this.$q.notify({color:"red",position:"top",message:"Seleccione un proveedor",icon:"report_problem"});return}this.loading=!0,this.$axios.post("buys",{proveedor_id:this.proveedor_id,observacion:this.observacion,productos:this.$store.productosBuys,descuento:this.descuento}).then(e=>{this.$q.notify({color:"green",position:"top",message:"Compra realizada",icon:"cloud_done"}),this.saleDialog=!1,this.$store.productosBuys=[],this.productsGet(),Ke.notaCompra(e.data)}).finally(()=>{this.loading=!1})},precioVenta(e){e.precioVenta===""&&(e.precioVenta=1)},cambioNumero(e,l){console.log(e)},removeCantidad(e,l){e.cantidad++,e.cantidadPedida--,e.cantidadVenta>1?e.cantidadVenta=parseInt(e.cantidadVenta)-1:e.cantidadVenta===1&&this.$store.productosBuys.splice(l,1)},addCantidad(e,l){e.cantidad--,e.cantidadPedida++,e.cantidadVenta=parseInt(e.cantidadVenta)+1},deleteProductosVenta(e,l){this.$store.productosBuys.splice(l,1)},redondeo(e){return Math.round(e*100)/100},clickDetalleProducto(e){const l=this.$store.productosBuys.find(m=>m.id===e.id);l?l.cantidadVenta+=1:(this.precio==="PRECIO 1"&&(e.precioVenta=e.precio1),this.precio==="PRECIO 2"&&(e.precioVenta=e.precio2),this.precio==="PRECIO 3"&&(e.precioVenta=e.precio3),this.precio==="PRECIO 4"&&(e.precioVenta=e.precio4),this.precio==="PRECIO 5"&&(e.precioVenta=e.precio5),this.precio==="PRECIO 6"&&(e.precioVenta=e.precio6),this.$store.productosBuys.push({id:e.id,nombre:e.nombre,cantidadVenta:1,precioVenta:e.precioVenta,costoUnitario:e.costoUnitario,stock:e.stock,image:e.image}))},clickSale(){this.saleDialog=!0,this.efectivo="",this.client={nit:"0",nombre:"SN"}},vaciarCanasta(){this.$store.productosBuys=[]},searchProductsOrder(e){e===""&&(this.products=this.productsAll),e==="Alfab\xE9tico"&&(this.products=this.productsAll.sort((l,m)=>l.nombre.localeCompare(m.nombre))),e==="Producto m\xE1s vendido"&&(this.products=this.productsAll.sort((l,m)=>m.cantidadVentas-l.cantidadVentas)),e==="Producto menos vendido"&&(this.products=this.productsAll.sort((l,m)=>l.cantidadVentas+m.cantidadVentas)),e==="Ultimas unidades disponibles"&&(this.products=this.productsAll.sort((l,m)=>l.stock-m.stock))},searchProductsCategory(e){e===""?this.products=this.productsAll:this.products=this.productsAll.filter(l=>l.category_id===e)},medidasGet(){this.$axios.get("medidas").then(e=>{this.medidas=this.medidas.concat(e.data)})},searchProducts(){this.search===""?this.products=this.productsAll:this.products=this.productsAll.filter(e=>e.nombre.toLowerCase().includes(this.search.toLowerCase()))},categoriesGet(){this.$axios.get("categories").then(e=>{this.categories=this.categories.concat(e.data)})},productsGet(){this.loading=!0,this.$axios.get("products").then(e=>{this.loading=!1,this.products=e.data,this.productsAll=e.data})},searchClient(e){this.loading=!0,this.$axios.post("searchClient",{nit:e}).then(l=>{l.data.nombre!==void 0&&(this.client.nombre=l.data.nombre)}).finally(()=>{this.loading=!1})}},computed:{cambio(){const e=parseFloat(this.efectivo===""?0:this.efectivo),l=parseFloat(this.total===""?0:this.total);return Math.round((e-l)*100)/100},total(){const e=this.$store.productosBuys.reduce((l,m)=>l+m.cantidadVenta*m.precioVenta,0);return Math.round(e*100)/100},totalganancia(){return this.$store.productosBuys.reduce((e,l)=>e+(l.cantidadVenta*l.precioVenta-l.costoUnitario)*l.cantidadVenta,0)},columnsProductosVenta(){return[{name:"borrar",align:"center",label:"Borrar",field:"borrar"},{name:"nombre",align:"center",label:"Nombre",field:"nombre"},{name:"cantidadVenta",align:"center",label:"Cantidad",field:"cantidadVenta"}]},ruleNumber(){return[e=>!!e||"Campo requerido",e=>e&&e>0||"Debe ser mayor a 0"]}}},We={class:"row"},Ze={class:"col-12 col-md-8"},$e={class:"row"},et={class:"col-12 col-md-3"},tt={class:"col-6 col-md-2 text-right"},ot=i("div",{class:"col-6 col-md-7 text-right"},null,-1),lt={class:"col-4 col-md-3"},at={class:"col-8 col-md-3"},it={class:"col-4 col-md-2"},st={class:"col-12 col-md-2 text-right"},rt=i("div",{class:"col-12 col-md-2 text-right"},null,-1),nt={class:"col-12"},ct={class:"col-12 col-md-4"},dt={class:"row"},ut=i("div",{class:"col-6 text-h6 q-pt-xs q-pl-lg text-red"},"Compra",-1),ht={class:"col-6 text-right"},mt={key:0,class:"flex flex-center q-pa-lg"},vt=i("div",{class:"q-pa-lg text-grey text-center noSelect"}," A\xFAn no tienes productos en tu canasta. Haz clic sobre un producto para agregarlo. ",-1),pt={class:"text-caption",style:{"max-width":"170px","white-space":"normal","overflow-wrap":"break-word","line-height":"0.9"}},ft={class:"text-grey"},bt=i("div",{style:{"font-size":"10px"}},"Bs.",-1),gt={class:"text-grey"},_t={class:"text-right text-grey-8 text-bold"},yt={class:"row"},St=i("div",{class:"col-7 text-grey"},"Cantidades de referencia",-1),Vt={class:"col-5 text-right"},zt={class:"col-7 text-grey"},Ct={class:"col-5 text-right text-green"},Pt=i("div",{class:"text-h6"},"Realizar Compra",-1),wt=i("thead",null,[i("tr",null,[i("th",null,"#"),i("th",null,"Nombre"),i("th",null,"Cantidad"),i("th",null,"Precio"),i("th",null,"Subtotal")])],-1),xt={class:"text-right"},qt={class:"text-right text-bold"},Qt={colspan:"2",class:"text-right text-bold"},kt=i("td",{colspan:"2",class:"text-right text-bold"},"Total",-1),Bt={class:"text-right text-bold"},At={class:"row q-pa-xs"},Ot={class:"col-4"},It={class:"col-8"},Tt={class:"row"},Dt={class:"col-6"},Mt={class:"col-6"},Rt=i("div",{id:"myElement",class:"hidden"},null,-1);function Ut(e,l,m,y,r,d){const h=Y("ProductsComponents"),t=Y("CalculatePage");return P(),W(je,{class:"bg-grey-3 q-pa-xs"},{default:c(()=>[i("div",We,[i("div",Ze,[i("div",$e,[i("div",et,[s(w,{modelValue:r.search,"onUpdate:modelValue":[l[0]||(l[0]=o=>r.search=o),d.searchProducts],label:"Buscar",outlined:"",dense:"",class:"bg-white",loading:r.loading},{prepend:c(()=>[s(D,{name:"o_search"})]),_:1},8,["modelValue","onUpdate:modelValue","loading"])]),i("div",tt,[s(Be,{"model-value":"vista",label:r.vista,color:"primary",dense:"",modelValue:r.vista,"onUpdate:modelValue":l[1]||(l[1]=o=>r.vista=o),"false-value":"lista","true-value":"tabla"},null,8,["label","modelValue"])]),ot,i("div",lt,[s(x,{modelValue:r.categoriSelected,"onUpdate:modelValue":[l[2]||(l[2]=o=>r.categoriSelected=o),d.searchProductsCategory],options:r.categories,label:"Categor\xEDa",outlined:"",dense:"",class:"bg-white","emit-value":"","map-options":"","option-label":o=>o.name,"option-value":o=>o.id},null,8,["modelValue","options","option-label","option-value","onUpdate:modelValue"])]),i("div",at,[s(x,{modelValue:r.ordenSelected,"onUpdate:modelValue":[l[3]||(l[3]=o=>r.ordenSelected=o),d.searchProductsOrder],options:r.ordenes,label:"Ordenar por",outlined:"",dense:"",class:"bg-white","emit-value":""},null,8,["modelValue","options","onUpdate:modelValue"])]),i("div",it,[s(x,{modelValue:r.almacenSelected,"onUpdate:modelValue":l[4]||(l[4]=o=>r.almacenSelected=o),options:["Todo","Almacen 1","Almacen 2"],label:"Almacen",outlined:"",dense:"",class:"bg-white","emit-value":""},null,8,["modelValue"])]),i("div",st,[s(x,{modelValue:r.precio,"onUpdate:modelValue":l[5]||(l[5]=o=>r.precio=o),options:["PRECIO 1","PRECIO 2","PRECIO 3","PRECIO 4","PRECIO 5","PRECIO 6"],label:"Precio",outlined:"",dense:"",class:"bg-white","emit-value":""},null,8,["modelValue"])]),rt,i("div",nt,[s(h,{products:r.products,onClickDetalleProducto:d.clickDetalleProducto,precio:r.precio,almacenSelected:r.almacenSelected,vista:r.vista},null,8,["products","onClickDetalleProducto","precio","almacenSelected","vista"])])])]),i("div",ct,[s(R,null,{default:c(()=>[s(C,{class:"q-pa-none q-ma-none"},{default:c(()=>[i("div",dt,[ut,i("div",ht,[s(_,{class:"text-subtitle1 text-blue-10 text-bold",style:{"text-decoration":"underline"},label:"Vaciar ",onClick:d.vaciarCanasta,"no-caps":"",flat:"",outline:""},null,8,["onClick"])])])]),_:1}),s(Z),s(C,{class:"q-pa-none q-ma-none"},{default:c(()=>[e.$store.productosBuys.length==0?(P(),M("div",mt,[s(D,{name:"o_shopping_basket",color:"grey",size:"100px"}),vt])):(P(),W(Xe,{key:1,style:{height:"400px"}},{default:c(()=>[s(Te,{dense:"",flat:"",bordered:"","hide-bottom":"","hide-header":"",rows:e.$store.productosBuys,columns:d.columnsProductosVenta,"rows-per-page-options":[0]},{body:c(o=>[s(De,{props:o},{default:c(()=>[s(U,{key:"borrar",props:o,style:{padding:"0px",margin:"0px"},"auto-width":""},{default:c(()=>[s(_,{flat:"",dense:"",onClick:f=>d.deleteProductosVenta(o.row,o.pageIndex),icon:"delete",color:"red",size:"10px",class:"q-pa-none q-ma-none"},null,8,["onClick"])]),_:2},1032,["props"]),s(U,{key:"nombre",props:o,"auto-width":""},{default:c(()=>[i("div",null,[i("div",null,[i("div",pt,p(o.row.nombre),1),i("div",ft,"Disponible: "+p(o.row.stock),1),s(w,{modelValue:o.row.precioVenta,"onUpdate:modelValue":[f=>o.row.precioVenta=f,f=>d.precioVenta(o.row)],style:{width:"170px"},class:"super-small",step:"0.01",type:"number",dense:"",outlined:""},{prepend:c(()=>[bt]),_:2},1032,["modelValue","onUpdate:modelValue"])])])]),_:2},1032,["props"]),s(U,{key:"cantidadVenta",props:o},{default:c(()=>[s(w,{dense:"",outlined:"","bottom-slots":"",min:"1",class:"super-small",modelValue:o.row.cantidadVenta,"onUpdate:modelValue":[f=>o.row.cantidadVenta=f,f=>d.cambioNumero(o.row,o.pageIndex)],rules:d.ruleNumber,type:"number","input-class":"text-center",required:""},{prepend:c(()=>[s(_,{style:{cursor:"pointer"},dense:"",flat:"",icon:"remove_circle_outline",onClick:f=>d.removeCantidad(o.row,o.pageIndex)},null,8,["onClick"])]),append:c(()=>[s(_,{style:{cursor:"pointer"},dense:"",flat:"",icon:"add_circle_outline",onClick:f=>d.addCantidad(o.row,o.pageIndex)},null,8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","rules"]),i("div",gt,"= Bs "+p(d.redondeo(o.row.cantidadVenta*o.row.precioVenta)),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1}))]),_:1}),s(C,null,{default:c(()=>[s(Ne,{padding:"",bordered:"",dense:"",class:"rounded-borders full-width q-pa-none q-ma-none"},{default:c(()=>[s(He,{dense:"","dense-toggle":"","expand-separator":"",label:"Total"},{header:c(()=>[s(E,null,{default:c(()=>[A(" Total ( "+p(e.$store.productosBuys.length)+" ) ",1)]),_:1}),s(E,{side:""},{default:c(()=>[i("div",_t,[i("u",null," Bs "+p(d.total),1)])]),_:1})]),default:c(()=>[s(R,null,{default:c(()=>[s(C,null,{default:c(()=>[i("div",yt,[St,i("div",Vt,p(e.$store.productosBuys.length),1),i("div",zt,[A(" Ganancia "),s(D,{name:"o_info"},{default:c(()=>[s(Ue,{anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:c(()=>[A(" Para calcular la ganancia correctamente, deber\xE1s cargar el costo unitario de todos los productos desde tu Inventario. ")]),_:1})]),_:1})]),i("div",Ct,p(d.totalganancia)+" Bs",1)])]),_:1})]),_:1})]),_:1})]),_:1}),s(_,{onClick:d.clickSale,class:"full-width","no-caps":"",label:"Confirmar compra",color:e.$store.productosBuys.length==0?"grey":"deep-orange",disable:e.$store.productosBuys.length==0},null,8,["onClick","color","disable"])]),_:1})]),_:1})])]),s($,{modelValue:r.saleDialog,"onUpdate:modelValue":l[9]||(l[9]=o=>r.saleDialog=o),persistent:""},{default:c(()=>[s(R,{style:{width:"750px","max-width":"90vw"}},{default:c(()=>[s(C,{class:"row items-center q-pb-none"},{default:c(()=>[Pt,s(Fe),I(s(_,{flat:"",round:"",dense:"",icon:"close"},null,512),[[oe]])]),_:1}),s(Le,{onSubmit:Ae(d.saleInsert,["prevent"])},{default:c(()=>[s(Ge,{dense:"","wrap-cells":"",flat:"",bordered:""},{default:c(()=>[wt,i("tbody",null,[(P(!0),M(Ie,null,Oe(e.$store.productosBuys,(o,f)=>(P(),M("tr",{key:o.id},[i("td",null,p(f+1),1),i("td",null,p(o.nombre),1),i("td",null,p(o.cantidadVenta),1),i("td",xt,p(d.numero2digitosRedondeado(o.precioVenta)),1),i("td",qt,p(d.numero2digitosRedondeado(o.cantidadVenta*o.precioVenta))+" Bs.",1)]))),128)),i("tr",null,[i("td",Qt,[s(w,{label:"Descuento",modelValue:r.descuento,"onUpdate:modelValue":l[6]||(l[6]=o=>r.descuento=o),dense:"",outlined:""},null,8,["modelValue"])]),kt,i("td",Bt,p(d.numero2digitosRedondeado(d.total-r.descuento))+" Bs.",1)])])]),_:1}),i("div",At,[i("div",Ot,[s(x,{modelValue:r.proveedor_id,"onUpdate:modelValue":l[7]||(l[7]=o=>r.proveedor_id=o),options:r.proveedores,label:"Proveedor",outlined:"",dense:"",class:"bg-white","emit-value":"","map-options":"","option-value":"id","option-label":"nombre",onFilter:d.fnFilter,"use-input":"","input-debounce":"0","hide-selected":"","fill-input":""},{"no-option":c(()=>[s(Re,null,{default:c(()=>[s(E,{class:"text-grey"},{default:c(()=>[A(" No hay resultados ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter"])]),i("div",It,[s(w,{outlined:"",dense:"",label:"Observaciones",modelValue:r.observacion,"onUpdate:modelValue":l[8]||(l[8]=o=>r.observacion=o)},null,8,["modelValue"])])]),s(Z),s(C,null,{default:c(()=>[i("div",Tt,[i("div",Dt,[s(_,{type:"submit",class:"full-width",icon:"o_add_circle",label:"Realizar Compra",loading:r.loading,"no-caps":"",color:"positive"},null,8,["loading"])]),i("div",Mt,[I(s(_,{class:"full-width",icon:"undo",label:"Atras","no-caps":"",color:"red",loading:r.loading},null,8,["loading"]),[[oe]])])])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),s($,{modelValue:r.calculateDialog,"onUpdate:modelValue":l[11]||(l[11]=o=>r.calculateDialog=o),position:"left","full-height":""},{default:c(()=>[s(t,{onClose:l[10]||(l[10]=o=>r.calculateDialog=!1),products:r.products},null,8,["products"])]),_:1},8,["modelValue"]),Rt]),_:1})}var no=ke(Ye,[["render",Ut]]);export{no as default};
