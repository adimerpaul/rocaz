import{_ as C,D as c,E as y,F as a,H as i,G as n,al as r,Q as u,an as m,b7 as E,ap as v,am as x,ak as g,bj as D,ao as Q,I as d,J as f}from"./index.1b6eb933.js";import{Q as b,d as k,a as N}from"./QMarkupTable.f5b5739d.js";import{Q as _}from"./QPagination.31d35416.js";import{Q as V}from"./QTooltip.4fa5f93e.js";import{Q as T}from"./QSpace.4d067a84.js";import{Q as U}from"./QForm.6a225d42.js";import{Q as O}from"./QPage.af41e2a4.js";import"./QItem.c5c3e815.js";import"./format.5fd81f0c.js";const S={data(){return{clients:[],client:{},type:"TODO",search:"",clientOption:"",clientDialog:!1,loading:!1,current:1,total:0}},mounted(){this.clientGet()},methods:{clientShowSales(o){},clientDelete(o){this.$q.dialog({title:"Eliminar Cliente",message:"Esta seguro de eliminar el cliente "+o.nombre,ok:{label:"Si",color:"negative",push:!0},cancel:{label:"No",color:"primary",push:!0}}).onOk(()=>{this.loading=!0,this.$axios.delete("clients/"+o.id).then(t=>{this.$alert.success(t.data.message),this.clientGet()}).catch(t=>{this.$alert.error(t.response.data.message)}).finally(()=>{this.loading=!1})})},clientEdit(o){this.client=o,this.clientDialog=!0},clientSave(){this.loading=!0,this.client.id?this.$axios.put("clients/"+this.client.id,this.client).then(o=>{this.$alert.success(o.data.message),this.clientDialog=!1,this.clientGet()}).catch(o=>{this.$alert.error(o.response.data.message)}).finally(()=>{this.loading=!1}):this.$axios.post("clients",this.client).then(o=>{this.$alert.success(o.data.message),this.clientDialog=!1,this.clientGet()}).catch(o=>{this.$alert.error(o.response.data.message)}).finally(()=>{this.loading=!1})},clientNew(){this.client={nombre:"",compania:"",nit:"",email:"",telefono:"",direccion:"",tipo:"CLIENTE"},this.clientDialog=!0},clientGet(){this.loading=!0,this.clients=[],this.$axios.get("clients",{params:{type:this.type,search:this.search,page:this.current}}).then(o=>{o.data.data.forEach(t=>{t.tipo==="PROVEEDOR"&&this.clients.push(t)}),this.total=o.data.last_page}).catch(o=>{this.$alert.error(o.response.data.message)}).finally(()=>{this.loading=!1})}}},w={class:"row"},G={class:"col-12 col-md-5"},I={class:"col-6 col-md-2"},P={class:"col-6 col-md-5 text-right"},R={class:"col-12 flex flex-center"},q=i("thead",null,[i("tr",null,[i("th",null,"#"),i("th",null,"Opcion"),i("th",null,"Nombre"),i("th",null,"Compania"),i("th",null,"NIT"),i("th",null,"Email"),i("th",null,"Telefono"),i("th",null,"Direccion"),i("th",null,"Tipo")])],-1),B=["onClick"],L={key:0,class:"text-bold"},F={key:1,class:"text-bold"};function A(o,t,j,z,l,s){return c(),y(O,{class:"bg-grey-3 q-pa-xs"},{default:a(()=>[i("div",w,[i("div",G,[n(r,{modelValue:l.search,"onUpdate:modelValue":[t[0]||(t[0]=e=>l.search=e),s.clientGet],outlined:"",label:"Search",dense:"",class:"bg-white",debounce:"300",loading:l.loading,clearable:""},null,8,["modelValue","onUpdate:modelValue","loading"])]),i("div",I,[n(b,{modelValue:l.type,"onUpdate:modelValue":[t[1]||(t[1]=e=>l.type=e),s.clientGet],outlined:"",label:"Selecionar Tipo",dense:"",class:"bg-white",options:["TODO","CLIENTE","PROVEEDOR"],loading:l.loading},null,8,["modelValue","onUpdate:modelValue","loading"])]),i("div",P,[n(u,{color:"green",label:"Nuevo Cliente",onClick:s.clientNew,"no-caps":"",icon:"add_circle_outline",loading:l.loading},null,8,["onClick","loading"])]),i("div",R,[n(_,{modelValue:l.current,"onUpdate:modelValue":[t[2]||(t[2]=e=>l.current=e),s.clientGet],max:l.total,"max-pages":6,"boundary-numbers":""},null,8,["modelValue","max","onUpdate:modelValue"])])]),n(k,{dense:""},{default:a(()=>[q,i("tbody",null,[(c(!0),m(v,null,E(l.clients,(e,p)=>(c(),m("tr",{key:p,onClick:h=>l.client=e,style:{cursor:"pointer"}},[i("td",null,d(p+1),1),i("td",null,[n(u,{dense:"",flat:"",color:"primary",icon:"edit",onClick:h=>s.clientEdit(e)},{default:a(()=>[n(V,null,{default:a(()=>[f("Editar Cliente")]),_:1})]),_:2},1032,["onClick"]),n(u,{dense:"",flat:"",color:"negative",icon:"delete",onClick:h=>s.clientDelete(e)},{default:a(()=>[n(V,null,{default:a(()=>[f("Eliminar Cliente")]),_:1})]),_:2},1032,["onClick"])]),i("td",null,d(e.nombre),1),i("td",null,d(e.compania),1),i("td",null,d(e.nit),1),i("td",null,d(e.email),1),i("td",null,d(e.telefono),1),i("td",null,d(e.direccion),1),i("td",null,[n(N,{label:e.tipo,color:e.tipo==="CLIENTE"?"primary":"secondary",dense:"","text-color":"white"},null,8,["label","color"])])],8,B))),128))])]),_:1}),n(Q,{modelValue:l.clientDialog,"onUpdate:modelValue":t[12]||(t[12]=e=>l.clientDialog=e),persistent:""},{default:a(()=>[n(x,{style:{width:"350px","max-width":"100vw"}},{default:a(()=>[n(g,{class:"row items-center q-pb-none"},{default:a(()=>[l.client.id?(c(),m("div",L,"Editar Cliente")):(c(),m("div",F,"Nuevo Cliente")),n(T),n(u,{flat:"",round:"",dense:"",icon:"close",onClick:t[3]||(t[3]=e=>l.clientDialog=!1)})]),_:1}),n(g,null,{default:a(()=>[n(U,{onSubmit:s.clientSave},{default:a(()=>[n(r,{modelValue:l.client.nombre,"onUpdate:modelValue":t[4]||(t[4]=e=>l.client.nombre=e),outlined:"",label:"Nombre",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"]),n(r,{modelValue:l.client.nit,"onUpdate:modelValue":t[5]||(t[5]=e=>l.client.nit=e),outlined:"",label:"NIT",dense:"",type:"number",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"]),n(r,{modelValue:l.client.compania,"onUpdate:modelValue":t[6]||(t[6]=e=>l.client.compania=e),outlined:"",label:"Compania",dense:"",hint:l.client.tipo},null,8,["modelValue","hint"]),n(r,{modelValue:l.client.email,"onUpdate:modelValue":t[7]||(t[7]=e=>l.client.email=e),outlined:"",label:"Email",dense:"",hint:""},null,8,["modelValue"]),n(r,{modelValue:l.client.telefono,"onUpdate:modelValue":t[8]||(t[8]=e=>l.client.telefono=e),outlined:"",label:"Celular",dense:"",type:"number",hint:""},null,8,["modelValue"]),n(r,{modelValue:l.client.direccion,"onUpdate:modelValue":t[9]||(t[9]=e=>l.client.direccion=e),outlined:"",label:"Direccion",dense:"",hint:""},null,8,["modelValue"]),n(b,{modelValue:l.client.tipo,"onUpdate:modelValue":t[10]||(t[10]=e=>l.client.tipo=e),outlined:"",label:"Tipo",dense:"",options:["CLIENTE","PROVEEDOR"]},null,8,["modelValue"]),n(D,{align:"right"},{default:a(()=>[n(u,{label:"Cancelar",color:"negative",onClick:t[11]||(t[11]=e=>l.clientDialog=!1),"no-caps":"",loading:l.loading},null,8,["loading"]),n(u,{label:l.client.id?"Actualizar":"Guardar",color:"primary",type:"submit",loading:l.loading,"no-caps":""},null,8,["label","loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var ee=C(S,[["render",A]]);export{ee as default};
