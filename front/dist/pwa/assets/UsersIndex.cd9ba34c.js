import{_ as f,D as n,E as d,F as o,G as l,Q as i,ak as t,K as h,al as b,aj as m,am as p,aq as w,be as V,an as C}from"./index.5403af7c.js";import{Q}from"./QBtnGroup.0f6a6085.js";import{a as x,Q as k}from"./QTable.5b123952.js";import{Q as y,a as U}from"./QSpace.9739ab42.js";import{a as v,Q as D}from"./QForm.14ea203f.js";import"./QList.7480af51.js";import"./format.0be963f0.js";const N={data(){return{users:[],user:{},search:"",userDialog:!1,loading:!1,columns:[{name:"option",label:"Opcion",align:"left",field:"option"},{name:"name",label:"Nombre",align:"left",field:"name"},{name:"username",label:"Nombre usuario",align:"left",field:"username"},{name:"email",label:"Email",align:"left",field:"email"},{name:"lugar",label:"Lugar",align:"left",field:"lugar"}]}},mounted(){this.userGet()},methods:{updatePassword(r){this.user=r,this.$q.dialog({title:"Ingrese nueva contrase\xF1a",prompt:{type:"password"}}).onOk(a=>{this.$axios.put("updatePassword/"+this.user.id,{password:a}).then(g=>{})})},userEdit(r){this.user=r,this.userDialog=!0},clientSave(){this.loading=!0,this.user.id?this.$axios.put("users/"+this.user.id,this.user).then(r=>{this.$alert.success("Usuario modificado correctamente"),this.userDialog=!1,this.userGet()}).catch(r=>{this.$alert.error(r.response.data.message)}).finally(()=>{this.loading=!1}):this.$axios.post("users",this.user).then(r=>{this.$alert.success("Usuario creado correctamente"),this.userDialog=!1,this.userGet()}).catch(r=>{this.$alert.error(r.response.data.message)}).finally(()=>{this.loading=!1})},usersNew(){this.user={name:"",email:"",username:"",lugar:"ORURO"},this.userDialog=!0},userGet(){this.loading=!0,this.clients=[],this.$axios.get("users",{params:{type:this.type,search:this.search,page:this.current}}).then(r=>{this.users=r.data}).catch(r=>{this.$alert.error(r.response.data.message)}).finally(()=>{this.loading=!1})}}},q={key:0,class:"text-bold"},B={key:1,class:"text-bold"};function E(r,a,g,_,s,u){return n(),d(v,{class:"bg-grey-3 q-pa-xs"},{default:o(()=>[l(k,{rows:s.users,"rows-per-page-options":[0],dense:"","wrap-cells":"",columns:s.columns},{"top-right":o(()=>[l(i,{label:"Registrar Usuario",icon:"add_circle_outline",dense:"","no-caps":"",color:"green",onClick:u.usersNew},null,8,["onClick"]),l(t,{modelValue:s.search,"onUpdate:modelValue":a[0]||(a[0]=e=>s.search=e),label:"Buscar",dense:"",outlined:""},{append:o(()=>[l(h,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-option":o(e=>[l(x,{props:e,"auto-width":""},{default:o(()=>[l(Q,null,{default:o(()=>[l(i,{icon:"edit",color:"orange",onClick:c=>u.userEdit(e.row),width:"250px",label:"Editar","no-caps":"",dense:"",size:"12px"},null,8,["onClick"]),l(i,{icon:"login",color:"indigo",onClick:c=>u.updatePassword(e.row),width:"250px",label:"Password","no-caps":"",dense:"",size:"12px"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns"]),l(C,{modelValue:s.userDialog,"onUpdate:modelValue":a[8]||(a[8]=e=>s.userDialog=e),persistent:""},{default:o(()=>[l(b,{style:{width:"350px","max-width":"100vw"}},{default:o(()=>[l(m,{class:"row items-center q-pb-none"},{default:o(()=>[s.user.id?(n(),p("div",q,"Editar Usuario")):(n(),p("div",B,"Nuevo Usuario")),l(y),l(i,{flat:"",round:"",dense:"",icon:"close",onClick:a[1]||(a[1]=e=>s.userDialog=!1)})]),_:1}),l(m,null,{default:o(()=>[l(D,{onSubmit:u.clientSave},{default:o(()=>[l(t,{modelValue:s.user.name,"onUpdate:modelValue":a[2]||(a[2]=e=>s.user.name=e),outlined:"",label:"Nombre",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"]),l(t,{modelValue:s.user.username,"onUpdate:modelValue":a[3]||(a[3]=e=>s.user.username=e),outlined:"",label:"Nombre de usuario",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"]),l(t,{modelValue:s.user.email,"onUpdate:modelValue":a[4]||(a[4]=e=>s.user.email=e),outlined:"",label:"Email",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"]),s.user.id?w("",!0):(n(),d(t,{key:0,modelValue:s.user.password,"onUpdate:modelValue":a[5]||(a[5]=e=>s.user.password=e),outlined:"",label:"Password",dense:"",type:"password",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])),l(U,{modelValue:s.user.lugar,"onUpdate:modelValue":a[6]||(a[6]=e=>s.user.lugar=e),outlined:"",label:"Lugar",dense:"",options:["ORURO","COCHABAMBA"]},null,8,["modelValue"]),l(V,{align:"right"},{default:o(()=>[l(i,{label:"Cancelar",color:"negative",onClick:a[7]||(a[7]=e=>s.userDialog=!1),"no-caps":"",loading:s.loading},null,8,["loading"]),l(i,{label:s.user.id?"Actualizar":"Guardar",color:"primary",type:"submit",loading:s.loading,"no-caps":""},null,8,["label","loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var z=f(N,[["render",E]]);export{z as default};
