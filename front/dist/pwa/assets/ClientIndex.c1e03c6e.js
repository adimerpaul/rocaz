import{c as Z,n as $,bd as ee,q as le,a as r,r as te,w as ne,be as U,bf as ae,O as ie,h as E,ak as g,g as oe,Q as h,_ as ue,D,E as se,F as d,H as u,G as o,am as B,b2 as re,ao as de,al as ce,aj as q,bg as me,an as ge,J as f,I as L}from"./index.6e00ca2e.js";import{a as G,d as be,Q as ve,b as fe}from"./QSpace.07f2d92e.js";import{b as he,d as M}from"./format.e93c79aa.js";import{a as ye,Q as pe}from"./QForm.575858e5.js";function T(e,n){return[!0,!1].includes(e)?e:n}var Ve=Z({name:"QPagination",props:{...$,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||ee.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:n}){const{proxy:w}=oe(),{$q:b}=w,t=le(e,b),s=r(()=>parseInt(e.min,10)),l=r(()=>parseInt(e.max,10)),p=r(()=>parseInt(e.maxPages,10)),V=r(()=>y.value+" / "+l.value),j=r(()=>T(e.boundaryLinks,e.input)),C=r(()=>T(e.boundaryNumbers,!e.input)),A=r(()=>T(e.directionLinks,e.input)),_=r(()=>T(e.ellipses,!e.input)),N=te(null),y=r({get:()=>e.modelValue,set:a=>{if(a=parseInt(a,10),e.disable||isNaN(a))return;const i=he(a,s.value,l.value);e.modelValue!==i&&n("update:modelValue",i)}});ne(()=>`${s.value}|${l.value}`,()=>{y.value=e.modelValue});const z=r(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),O=r(()=>e.gutter in U?`${U[e.gutter]}px`:e.gutter||null),R=r(()=>O.value!==null?`--q-pagination-gutter-parent:-${O.value};--q-pagination-gutter-child:${O.value}`:null),P=r(()=>{const a=[e.iconFirst||b.iconSet.pagination.first,e.iconPrev||b.iconSet.pagination.prev,e.iconNext||b.iconSet.pagination.next,e.iconLast||b.iconSet.pagination.last];return b.lang.rtl===!0?a.reverse():a}),K=r(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),Q=r(()=>ae(e,"flat")),H=r(()=>({[Q.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),J=r(()=>{const a={[Q.value]:!1};return e.activeDesign!==""&&(a[e.activeDesign]=!0),a}),W=r(()=>({...J.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),S=r(()=>{let a=Math.max(p.value,1+(_.value?2:0)+(C.value?2:0));const i={pgFrom:s.value,pgTo:l.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(l.value).length)}em`}};return p.value&&a<l.value-s.value+1&&(a=1+Math.floor(a/2)*2,i.pgFrom=Math.max(s.value,Math.min(l.value-a+1,e.modelValue-Math.floor(a/2))),i.pgTo=Math.min(l.value,i.pgFrom+a-1),C.value&&(i.boundaryStart=!0,i.pgFrom++),_.value&&i.pgFrom>s.value+(C.value?1:0)&&(i.ellipsesStart=!0,i.pgFrom++),C.value&&(i.boundaryEnd=!0,i.pgTo--),_.value&&i.pgTo<l.value-(C.value?1:0)&&(i.ellipsesEnd=!0,i.pgTo--)),i});function F(a){y.value=a}function X(a){y.value=y.value+a}const Y=r(()=>{function a(){y.value=N.value,N.value=null}return{"onUpdate:modelValue":i=>{N.value=i},onKeyup:i=>{ie(i,13)===!0&&a()},onBlur:a}});function m(a,i,x){const v={"aria-label":i,"aria-current":"false",...H.value,...a};return x===!0&&Object.assign(v,{"aria-current":"true",...W.value}),i!==void 0&&(e.toFn!==void 0?v.to=e.toFn(i):v.onClick=()=>{F(i)}),E(h,v)}return Object.assign(w,{set:F,setByOffset:X}),()=>{const a=[],i=[];let x;if(j.value===!0&&(a.push(m({key:"bls",disable:e.disable||e.modelValue<=s.value,icon:P.value[0]},s.value)),i.unshift(m({key:"ble",disable:e.disable||e.modelValue>=l.value,icon:P.value[3]},l.value))),A.value===!0&&(a.push(m({key:"bdp",disable:e.disable||e.modelValue<=s.value,icon:P.value[1]},e.modelValue-1)),i.unshift(m({key:"bdn",disable:e.disable||e.modelValue>=l.value,icon:P.value[2]},e.modelValue+1))),e.input!==!0){x=[];const{pgFrom:v,pgTo:I,marginalStyle:k}=S.value;if(S.value.boundaryStart===!0){const c=s.value===e.modelValue;a.push(m({key:"bns",style:k,disable:e.disable,label:s.value},s.value,c))}if(S.value.boundaryEnd===!0){const c=l.value===e.modelValue;i.unshift(m({key:"bne",style:k,disable:e.disable,label:l.value},l.value,c))}S.value.ellipsesStart===!0&&a.push(m({key:"bes",style:k,disable:e.disable,label:"\u2026",ripple:!1},v-1)),S.value.ellipsesEnd===!0&&i.unshift(m({key:"bee",style:k,disable:e.disable,label:"\u2026",ripple:!1},I+1));for(let c=v;c<=I;c++)x.push(m({key:`bpg${c}`,style:k,disable:e.disable,label:c},c,c===e.modelValue))}return E("div",{class:z.value,...K.value},[E("div",{class:"q-pagination__content row no-wrap items-center",style:R.value},[...a,e.input===!0?E(g,{class:"inline",style:{width:`${V.value.length/1.5}em`},type:"number",dense:!0,value:N.value,disable:e.disable,dark:t.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:V.value,min:s.value,max:l.value,...Y.value}):E("div",{class:"q-pagination__middle row justify-center"},x),...i])])}}});const Ce={data(){return{clients:[],client:{},type:"TODO",search:"",clientOption:"",clientDialog:!1,loading:!1,current:1,total:0}},mounted(){this.clientGet()},methods:{clientShowSales(e){},clientDelete(e){this.$q.dialog({title:"Eliminar Cliente",message:"Esta seguro de eliminar el cliente "+e.nombre,ok:{label:"Si",color:"negative",push:!0},cancel:{label:"No",color:"primary",push:!0}}).onOk(()=>{this.loading=!0,this.$axios.delete("clients/"+e.id).then(n=>{this.$alert.success(n.data.message),this.clientGet()}).catch(n=>{this.$alert.error(n.response.data.message)}).finally(()=>{this.loading=!1})})},clientEdit(e){this.client=e,this.clientDialog=!0},clientSave(){this.loading=!0,this.client.id?this.$axios.put("clients/"+this.client.id,this.client).then(e=>{this.$alert.success(e.data.message),this.clientDialog=!1,this.clientGet()}).catch(e=>{this.$alert.error(e.response.data.message)}).finally(()=>{this.loading=!1}):this.$axios.post("clients",this.client).then(e=>{this.$alert.success(e.data.message),this.clientDialog=!1,this.clientGet()}).catch(e=>{this.$alert.error(e.response.data.message)}).finally(()=>{this.loading=!1})},clientNew(){this.client={nombre:"",compania:"",nit:"",email:"",telefono:"",direccion:"",tipo:"CLIENTE"},this.clientDialog=!0},clientGet(){this.loading=!0,this.$axios.get("clients",{params:{type:this.type,search:this.search,page:this.current}}).then(e=>{this.clients=e.data.data,this.total=e.data.last_page}).catch(e=>{this.$alert.error(e.response.data.message)}).finally(()=>{this.loading=!1})}}},Se={class:"row"},xe={class:"col-12 col-md-5"},ke={class:"col-6 col-md-2"},Ee={class:"col-6 col-md-5 text-right"},De={class:"col-12 flex flex-center"},Ne=u("thead",null,[u("tr",null,[u("th",null,"#"),u("th",null,"Opcion"),u("th",null,"Nombre"),u("th",null,"Compania"),u("th",null,"NIT"),u("th",null,"Email"),u("th",null,"Telefono"),u("th",null,"Direccion"),u("th",null,"Tipo")])],-1),Pe=["onClick"],Be={key:0,class:"text-bold"},Te={key:1,class:"text-bold"};function we(e,n,w,b,t,s){return D(),se(ye,{class:"bg-grey-3 q-pa-xs"},{default:d(()=>[u("div",Se,[u("div",xe,[o(g,{modelValue:t.search,"onUpdate:modelValue":[n[0]||(n[0]=l=>t.search=l),s.clientGet],outlined:"",label:"Search",dense:"",class:"bg-white",debounce:"300",loading:t.loading,clearable:""},null,8,["modelValue","onUpdate:modelValue","loading"])]),u("div",ke,[o(G,{modelValue:t.type,"onUpdate:modelValue":[n[1]||(n[1]=l=>t.type=l),s.clientGet],outlined:"",label:"Selecionar Tipo",dense:"",class:"bg-white",options:["TODO","CLIENTE","PROVEEDOR"],loading:t.loading},null,8,["modelValue","onUpdate:modelValue","loading"])]),u("div",Ee,[o(h,{color:"green",label:"Nuevo Cliente",onClick:s.clientNew,"no-caps":"",icon:"add_circle_outline",loading:t.loading},null,8,["onClick","loading"])]),u("div",De,[o(Ve,{modelValue:t.current,"onUpdate:modelValue":[n[2]||(n[2]=l=>t.current=l),s.clientGet],max:t.total,"max-pages":6,"boundary-numbers":""},null,8,["modelValue","max","onUpdate:modelValue"])])]),o(be,{dense:""},{default:d(()=>[Ne,u("tbody",null,[(D(!0),B(de,null,re(t.clients,(l,p)=>(D(),B("tr",{key:p,onClick:V=>t.client=l,style:{cursor:"pointer"}},[u("td",null,f(p+1),1),u("td",null,[o(h,{dense:"",flat:"",color:"primary",icon:"edit",onClick:V=>s.clientEdit(l)},{default:d(()=>[o(M,null,{default:d(()=>[L("Editar Cliente")]),_:1})]),_:2},1032,["onClick"]),o(h,{dense:"",flat:"",color:"negative",icon:"delete",onClick:V=>s.clientDelete(l)},{default:d(()=>[o(M,null,{default:d(()=>[L("Eliminar Cliente")]),_:1})]),_:2},1032,["onClick"])]),u("td",null,f(l.nombre),1),u("td",null,f(l.compania),1),u("td",null,f(l.nit),1),u("td",null,f(l.email),1),u("td",null,f(l.telefono),1),u("td",null,f(l.direccion),1),u("td",null,[o(fe,{label:l.tipo,color:l.tipo==="CLIENTE"?"primary":"secondary",dense:"","text-color":"white"},null,8,["label","color"])])],8,Pe))),128))])]),_:1}),o(ge,{modelValue:t.clientDialog,"onUpdate:modelValue":n[12]||(n[12]=l=>t.clientDialog=l),persistent:""},{default:d(()=>[o(ce,{style:{width:"350px","max-width":"100vw"}},{default:d(()=>[o(q,{class:"row items-center q-pb-none"},{default:d(()=>[t.client.id?(D(),B("div",Be,"Editar Cliente")):(D(),B("div",Te,"Nuevo Cliente")),o(ve),o(h,{flat:"",round:"",dense:"",icon:"close",onClick:n[3]||(n[3]=l=>t.clientDialog=!1)})]),_:1}),o(q,null,{default:d(()=>[o(pe,{onSubmit:s.clientSave},{default:d(()=>[o(g,{modelValue:t.client.nombre,"onUpdate:modelValue":n[4]||(n[4]=l=>t.client.nombre=l),outlined:"",label:"Nombre",dense:"",rules:[l=>!!l||"Campo requerido"]},null,8,["modelValue","rules"]),o(g,{modelValue:t.client.nit,"onUpdate:modelValue":n[5]||(n[5]=l=>t.client.nit=l),outlined:"",label:"NIT",dense:"",type:"number",rules:[l=>!!l||"Campo requerido"]},null,8,["modelValue","rules"]),o(g,{modelValue:t.client.compania,"onUpdate:modelValue":n[6]||(n[6]=l=>t.client.compania=l),outlined:"",label:"Compania",dense:"",hint:t.client.tipo},null,8,["modelValue","hint"]),o(g,{modelValue:t.client.email,"onUpdate:modelValue":n[7]||(n[7]=l=>t.client.email=l),outlined:"",label:"Email",dense:"",hint:""},null,8,["modelValue"]),o(g,{modelValue:t.client.telefono,"onUpdate:modelValue":n[8]||(n[8]=l=>t.client.telefono=l),outlined:"",label:"Celular",dense:"",type:"number",hint:""},null,8,["modelValue"]),o(g,{modelValue:t.client.direccion,"onUpdate:modelValue":n[9]||(n[9]=l=>t.client.direccion=l),outlined:"",label:"Direccion",dense:"",hint:""},null,8,["modelValue"]),o(G,{modelValue:t.client.tipo,"onUpdate:modelValue":n[10]||(n[10]=l=>t.client.tipo=l),outlined:"",label:"Tipo",dense:"",options:["CLIENTE","PROVEEDOR"]},null,8,["modelValue"]),o(me,{align:"right"},{default:d(()=>[o(h,{label:"Cancelar",color:"negative",onClick:n[11]||(n[11]=l=>t.clientDialog=!1),"no-caps":"",loading:t.loading},null,8,["loading"]),o(h,{label:t.client.id?"Actualizar":"Guardar",color:"primary",type:"submit",loading:t.loading,"no-caps":""},null,8,["label","loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Ie=ue(Ce,[["render",we]]);export{Ie as default};
